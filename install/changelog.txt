# DOGRC Changelog

## [0.1.6] - 2025-11-21

### New Features
- **dupefind Plugin**: Added new file-operations plugin for finding duplicate files
  - Finds duplicate files by content hash (MD5/SHA256)
  - Recursive directory scanning
  - Detailed duplicate grouping and reporting
  - Full drchelp documentation integration
  - Comprehensive unit test suite (45 tests)

- **Parallel Test Execution**: Added parallel test execution support
  - `--parallel` flag (`-p`, `-P`) for running tests simultaneously
  - Resource monitor (`htop`/`top`) in right tmux pane during parallel execution
  - Improved test execution time for large test suites
  - All test files updated for parallel execution safety

- **Test Runner Enhancements**: Added `--stage` flag for targeted testing
  - `--stage` flag (`-s`, `-S`) to test specific test and its adjacent tests
  - Useful for debugging specific test failures
  - Improved test runner efficiency

- **pokefetch Enhancement**: Added `--relocate` flag for custom output location
  - `--relocate` flag (`-l`, `-L`) to specify output file location
  - Defaults to `/tmp/pokefetch.txt` if not specified
  - Enables test isolation for parallel execution
  - Full unit test coverage for new flag

- **timer Enhancement**: Added `--use-dir` flag for custom timer directory
  - `--use-dir` flag (`-ud`, `-UD`) to specify custom directory for timer files
  - Enables test isolation for parallel execution
  - Full unit test coverage for new flag

### Enhancements
- **Version Comparison**: Enhanced to handle 4+ part version strings
  - Now correctly compares versions like `0.1.5.12`, `0.1.5.1`, etc.
  - Iterates through all available parts with proper padding
  - Updated both `drcupdate.sh` and `_UPDATE.sh` with improved logic
  - Comprehensive unit tests for 4-part version comparison

- **Test Suite Improvements**: Enhanced for parallel execution safety
  - All test files updated with unique process ID prefixes (`TEST_PREFIX="test_name_$$"`)
  - Fixed race conditions in `test-backup.sh` using before/after directory tracking
  - Improved cleanup logic to remove all temporary files and directories
  - Enhanced test file isolation for parallel execution

- **Test Runner Stability**: Improved parallel mode stability
  - All test output redirected to `/dev/null` in parallel mode
  - Protected resource monitor from interruption using `exec` and `trap`
  - Prevented summary from overwriting resource monitor in parallel mode

- **Update Script Enhancements**: Improved migration logic
  - Added preservation of `disabled.json` user customizations
  - Added preservation of user-created test files in `unit-tests/` directory
  - Enhanced migration summary messages

### Bug Fixes
- **Test Score Tabulation**: Fixed score calculation with proper integer conversion
  - Added explicit integer conversion for score and total variables
  - Fixed logic to only count tests with `total > 0`
  - Corrected percentage calculations

- **Test Cleanup**: Fixed cleanup issues in multiple test files
  - Fixed `test-pwd.sh` cleanup to remove test directories
  - Fixed `test-timer.sh` cleanup to remove timer directories
  - Enhanced `_TEST-ALL.sh` and `_test-all-fb.sh` cleanup functions
  - Improved cleanup to remove all temporary files and directories

- **Test Race Conditions**: Fixed parallel execution conflicts
  - Fixed `test-backup.sh` to use before/after directory tracking instead of glob patterns
  - Fixed `test-navto.sh` to use test-specific config directory
  - Fixed `test-dots.sh` to use `TEST_PREFIX` for config directory
  - Fixed all test files to use unique file/directory naming

- **Test Failures**: Fixed various test issues
  - Fixed `test-pokefetch.sh` score calculation (was showing 36/35)
  - Fixed `test-timer.sh` LIST and CLEAR commands with `--use-dir` flag
  - Fixed test file cleanup patterns to prevent accidental deletion

- **Update Script**: Fixed `--fail-fast` logic in `_test-all-fb.sh`
  - Now correctly stops on first non-100% test result
  - Improved regex pattern for parsing "Tests Passed: X / Y"

### Infrastructure
- Added `dupefind.sh` to installation verification in `_INSTALL.sh`
- Enhanced update script to preserve user configurations (`disabled.json`, user tests)
- Updated drchelp documentation for new plugins and flags
- Improved test runner cleanup and resource management

---

## [0.1.5] - 2025-11-20

### New Features
- **Unit Test Runner**: Added comprehensive test runner with tmux interface
  - Real-time progress tracking with split pane display (overview + live test output)
  - Elapsed time tracking for suite and individual tests
  - Auto-close after 5 seconds when tests complete
  - 'q' key binding to quit early
  - Helper functions for real-time test progress updates

- **Unit Test Infrastructure**: Added comprehensive unit test suite
  - Added `_TEST-ALL.sh`: Main test runner script
  - Added `_test-results-helper.sh`: Helper functions for test results
  - Added unit tests for all 25 plugins with real-time progress tracking
  - Enhanced test-weather.sh with N/A test handling (excludes N/A from percentage)

- **prepfile Utility**: Deprecated prepsh, added prepfile with multi-language support
  - Supports multiple programming languages (bash, python, rust, go, javascript, typescript, C, C++, java, ruby, perl, php, lua, zsh, fish)
  - Automatic file extension handling
  - Makes script files executable automatically

- **runtests Plugin**: Added new utility plugin to run unit test suite
  - Full drchelp documentation integration
  - Help flags delegate to drchelp

### Enhancements
- **motd.sh**: Added pager support for long messages (>20 lines)
  - Shows preview for long messages
  - Opens full content in read-only pager
  - Updated drchelp documentation

- **compress()**: Fixed exit code capture for gz and bz2 formats

- **Installation**: Added optional unit-tests installation prompt in _INSTALL.sh

- **Documentation**: 
  - Regenerated README.md based on current project state
  - Added comprehensive comparison report between DOGRC and BASHRC
  - Enhanced drchelp documentation for all utilities

### Testing
- Added comprehensive unit tests for all plugins:
  - analyze-file.sh
  - available.sh
  - calc.sh
  - cd-cdd-zd.sh
  - cpuinfo.sh
  - cpx.sh
  - dots.sh
  - drcfortune.sh
  - drchelp.sh (future-proof tests)
  - drcupdate.sh
  - drcversion.sh
  - fastnote.sh
  - genpassword.sh
  - motd.sh
  - navto.sh
  - pokefetch.sh
  - prepfile.sh
  - slashback.sh
  - timer.sh
  - weather.sh

### Infrastructure
- Moved unit-tests from testing/unit-tests to root level
- Added runtests.sh to plugin check in _INSTALL.sh

---

## [0.1.4] - 2025-11-19

### New Features
- **Standardized Help Flags**: All plugins now support --help and -h flags consistently
- **Update Check Configuration**: Added enable_update_check configuration option

### Enhancements
- **Tab Completion**: Added comprehensive tab completion for utilities
- **fastnote**: Enhanced with improved functionality

### Documentation
- Added comprehensive comparison report between DOGRC and BASHRC

**Note**: Version 0.1.3 was skipped. The version jumped directly from 0.1.2 to 0.1.4.

---

## [0.1.2] - 2025-11-19

### New Features
- **drcupdate Utility**: Added auto-update feature with version checking
  - Checks for available DOGRC updates
  - Semantic version comparison
  - Version masking support via version.fake file
  - --yes flag for automatic updates

### Enhancements
- **drcversion**: Fixed to check config/version.fake instead of core/version.fake
- **Update Script**: Added _UPDATE.sh script for upgrading DOGRC
- **Installation**: Enhanced _INSTALL.sh with copyright splash screen
- **Security**: Added security checks and unique exit codes to install scripts
- **Update Process**: Restore config/navto.json during update

### Bug Fixes
- Fixed user-plugins directory creation
- Fixed installation script: added main() call and improved error handling
- Made all scripts executable (chmod +x)

---

## [0.1.1] - 2025-11-19

### Documentation
- Updated changelog

---

## [0.1.0] - 2025-11-19

### Initial Release
- DOGRC alpha release
- Core plugin system
- Configuration management
- Installation scripts
- Basic utilities and plugins

